

@startuml

skinparam defaultFontName Arial
skinparam component {
	BackgroundColor #ccebff 
	BorderColor #000000
	FontColor #004374
	FontSize 15
	FontStyle Bold
}
skinparam node {
	BackgroundColor #ccebff 
	BorderColor #000000
	FontColor #004374
	FontSize 13
	FontStyle Bold
}

:Разработчик: as Developer

package "ALM. TFS. Репозиторий Git" {

	node CSharp [
	Исходный код системы
	]

	node UmlTxt [
	Diagrams.uml.txt
	(Тестовое описание диаграмм PlantUML)
	]

	node MDSolution [
	СР_Solution.md
	(Описание от разработчика)
	]

	node GitLog [
	Журнал коммитов Git
	]

}

package "LivingDoc. Шаблоны документов" {
	
	node MDDefault [
	СР_Default.md
	(Описание формулировок по умолчанию)
	] 

	node XmlMDStruct [
	СР_Struct.md.xml
	(Описание целевой структуры документа)
	] 

}

[TFS.Build solution] as TFSBuildSolution

package "LivingDoc. Генерация" {

	[LivingDoc.MDMerge] as MDMerge
	[LivingDoc.MDLinter] as MDLinter
	[LivingDoc.Wsp2MD] as Wsp2MD
	[LivingDoc.UmlGenerator] as UmlGenerator
	[LivingDoc.GitLog2MD] as GitLog2MD

}

package "ALM. Хранилище артефактов" {

	node WSP [
	Solution.wsp
	(Пакет с решением)
	]

	node UmlPng [
	Diagram.uml.png
	Изображение UML диаграммы
	]


}


node MDSolutionSpec [
СР_Solution_v1.3.md
Спецификация на решение Solution.wsp
]

package "LivingDoc. Публикация" {
	
	[LivingDoc.Pub.Html2SPWiki] as Html2Wiki
	[LivingDoc.Pub.Docs2CIS] as Docs2CIS
	[LivingDoc.Pub.MD2Html] as MD2Html
	[LivingDoc.Pub.Html2Docx] as Html2Docx
	[LivingDoc.Pub.Html2SPWiki] as Html2SPWiki
	[LivingDoc.Pub.Docx2Pdf] as Docx2Pdf

}

package "ALM. Библиотека тех. документации" {
	
	node Wiki [
		Wiki страницы с описанием функционала решений
	]

}

package "Портал ИТСК. Системы КИС" {
	
	node CIS [
		Библиотека тех. и организационной документации
	]

}
	
node MDGitLog [
СР_Solution.GitLog.md
(Текстовое описание истории изменений)
] 

node MDWspDetails [
СР_Solution.wspDetails.md
(Текстовое описание пакета)
] 

node HTMLSolutionSpec [
СР_Solution_v1.3.html
(Спецификация в формате HTML)
] 

node DocxSolutionSpec [
СР_Solution_v1.3.docx
(Спецификация в формате DOCX)
] 

node PdfSolutionSpec [
СР_Solution_v1.3.pdf
(Спецификация в формате PDf)
] 


' Разработчики артефактов
Developer --> CSharp
Developer --> MDSolution
Developer --> UmlTxt


' Сборка WSP пакета
CSharp --> TFSBuildSolution
TFSBuildSolution --> WSP
WSP --> Wsp2MD
Wsp2MD --> MDWspDetails

' Сборка документации
'   Uml Generation
UmlTxt --> UmlGenerator
UmlGenerator --> UmlPng
UmlPng ... MDSolutionSpec

'   GitLog to MD
GitLog --> GitLog2MD 
GitLog2MD --> MDGitLog

'   Линтинг Markdown
MDSolution --> MDLinter : "Проверка орфографии\nи синтаксиса MarkDown"

'   Merge
MDSolution --> MDMerge
MDWspDetails --> MDMerge
MDGitLog --> MDMerge
MDDefault --> MDMerge
XmlMDStruct --> MDMerge
MDMerge -> MDSolutionSpec

'   Подготовка к публикации

MDSolutionSpec --> MD2Html
MD2Html --> HTMLSolutionSpec
HTMLSolutionSpec --> Html2Docx
Html2Docx --> DocxSolutionSpec
DocxSolutionSpec --> Docx2Pdf
Docx2Pdf --> PdfSolutionSpec

'   Публикация

HTMLSolutionSpec --> Html2SPWiki
Html2SPWiki -> Wiki

DocxSolutionSpec --> Docs2CIS
PdfSolutionSpec --> Docs2CIS
Docs2CIS ---> CIS

@enduml

